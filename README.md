% Haskellによる関数プログラミング
% 山下伸夫
% 2017-08-20

## 関数プログラミング言語

- 関数プログラミング言語？
- 関数プログラミング用に設計された言語？

## 関数プログラミング

- 「関数プログラミング言語を使う」プログラミング？
- 「副作用を**ほとんど**使わない」プログラミング？

## 関数プログラミングと命令プログラミング

- 共存可能
- 分離重要

## なぜ関数プログラミングしたい

- プログラムを計算可能関数として扱う．
    - プログラムの性質を数学的に扱えると嬉しい．

## 関数プログラミングのプログラム記述体系

- 式と値の単純な体系
- 参照透明な言語体系

## 高水準言語の基本機能

1. 基本式
2. 組み合わせ方法
3. 抽象化の方法

## NGワード

- 副作用
    - そのような概念はそもそも関数プログラミングにはない
    - 対象を記述するのにそのような言語機構は必要ない
	    - 算術式のない単純なアセンブリ言語に副作用はあるか

## 注意ワード

- 状態
    - 対象のアイデンティティに影響にないプロパティ
	    - 17才の「山下」と30才の「山下」は同一人物か
		- プログラムの中で同時に存在できるか

- 遅延評価(lazy evaluation)
    - 遅延評価であることを意識しなければならないとき
	- スペースリーク問題

- カリー化(currying)と部分適用(partial application)
    - 型式の読み方

- 高階関数
    - 型式の読み方
	
## Haskellで関数プログラミング

- 式(expression)
- 値(value)
- 型(type)

- 関数抽象(function abstraction)
- 関数適用(function application)
- 関数型(function type)

## パーザライブラリを構成する

単純なパーザを組み立てて複雑なパーザを作成する

- 基本パーザ
- 組み立てるための演算
- 名前を付ける

閉包性


## パーザ関数の型

型から考える

```haskell
type Parser0 = [Token] -> Value
```

トークンの型とパース結果の値の型をパラメータとする

```haskell
type Parser1 t v = [t] -> v
```

## パーザ関数の型

結果には残りのトークン列が含まれているべき．

```haskell
type Parser2 t v = [t] -> (v, [t])
```

　

複数のパース方法があるかもしれないし，  
入力のトークン列が文法を満していないかもしれない．

```haskell
type Parser3 t v = [t] -> [(v, [t])]
```

## パーザ関数の型

トークンは単純化して文字(``Char``)とする

```haskell
type Parser v = String -> [(v, String)]
```

## 日付の構文解析


